---
title: 前端规范
date: 2016-10-18 17:28:08
tags:
---


## 一些约束

> 通过保持代码风格和传统的一致性，我们可以减少遗留系统维护的负担，并降低未来系统崩溃的风险。而通过遵照最佳实践，我们能确保优化的页面加载、性能以及可维护的代码。

### 核心

1.  表现，内容，行为的分离
2.  标记应该是结构良好、语义正确 以及 普遍合法

### 缩进

一个TAB（四个空格）

### 可读性&压缩

开发环境和上线环境用gulp分开，线下开发环境做到良好的开发环境的可维护性和可读性，线上环境通过自动化处理压缩文件大小，例如LESS和JS

## 标记

> 标记定义了文档的结构和纲要，并提供结构化的内容。除了最基本的概念（例如标题、段落和列表）之外，标记并不是用来定义页面上内容的外观和体验的。HTML的表现属性都已经被废弃了，有关样式的定义应该被包含在样式表中。

### Doctype

标记中必须总是使用合适的Doctype来指示浏览器触发标准模式. 永远要避免Quirks模式。

    <!DOCTYPE html>

页面上必须存在这个标记，要确保渲染模式的正确，这个标记不区分大小写

加入这个标记使文档标记为中文编码网站

### 字符编码

所有标记必须通过UTF-8编码传递，因为这种编码方式是对国际化最友好的。必须在HTTP的header和HTML文档的head部分都指定这种编码。

设定字符编码是通过 <meta> 标签进行。

    <meta charset="utf-8">

### 标记的总体原则

*   `<html>`的标签可以加上`lang="zh-CN"`确保chrome渲染时不出翻译选项
*   有时候 IE 会在用户不知道的情况下自作主张切换到兼容模式。要阻止你的站点缺省进入兼容模式，可以在站点的 部分加入下列代码：

        <meta http-equiv="X-UA-Compatible" content="IE=edge">

*   段落分隔符要使用实际对应的`<p>`元素，而不是用多个`<br/>`标签。

*   在合适的条件下，充分利用`<dl>`（定义列表）和`<blockquote>`标签。
*   列表中的条目必须总是放置于`<ul>`、`<ol>`或`<dl>` 中，永远不要用一组 `<div>`或`<p>` 来表示。
*   给每个表单里的字段加上 `<label>` 标签，其中的 for 属性必须和对应的输入字段对应，这样用户就可以点击标签。同理，给标签加上 `cursor:pointer;` 样式也是明智的做法。
*   不用使用输入字段中的 size 属性。该属性是和输入字段里文本的 `font-size`相关的。应该使用CSS宽度。
*   在某些闭合的 `</div>` 标签旁边加上一段html注释，说明这里闭合的是什么元素。这在有大量嵌套和缩进的情况下会很有用。
*   不要把表格用于页面布局。
*   在合适的条件下，利用 `microformats` 和/或者 `Microdata` ，具体说是 `hCard` 和 `adr`。
*   在合适的条件下，利用 `<thead>`、`<tbody>`和`<th>`标签 (以及Scope属性）。
*   在HTML5规范里并没有严格要求闭合，但是这个规范要确保每个标签都有闭合状态
*   同上考虑到一些属性可以接受空白值，为了保持一致性，我们要求所有属性值必须加上引号。
*   对于属性的定义，确保全部使用双引号，绝不要使用单引号。

### 属性顺序

HTML 属性应当按照以下给出的顺序依次排列，确保代码的易读性。

    class -> id, name -> data-*  ->  src, for, type, href -> title, alt -> aria-*, role

class 用于标识高度可复用组件，因此应该排在首位。id 用于标识具体组件，应当谨慎使用（例如，页面内的书签），因此排在第二位。

    <a class="..." id="..." data-modal="toggle" href="#">
    Example link
    </a>

    <input class="form-control" type="text">

    <img src="..." alt="...">

### 布尔（boolean）型属性

    布尔型属性可以在声明时不赋值。XHTML 规范要求为其赋值，但是 HTML5 规范不需要。

更多信息请参考 WhatWG section on boolean attributes：

元素的布尔型属性如果有值，就是 true，如果没有值，就是 false。 如果一定要为其赋值的话，请参考 WhatWG 规范：

如果属性存在，其值必须是空字符串或 […] 属性的规范名称，并且不要再收尾添加空白符。 简单来说，就是不用赋值。

    <input type="text" disabled>

    <input type="checkbox" value="1" checked>

    <select>
      <option value="1" selected>1</option>
    </select>

## CSS

### 编码的总体原则

*   从外部文件加载CSS，尽可能减少文件数。加载标签必须放在文件的`HEAD`部分。
*   不要在文件中用内联式引入的样式，不管它是定义在样式标签里还是直接定义在元素上。这样会很难追踪样式规则。
*   避免为 0 值指定单位，例如，用 margin: 0; 代替 margin: 0px。 加载样式

        <link rel="stylesheet" type="text/css" href="myStylesheet.css">

*   定义样式的时候，对样式在页面只出现一次的元素用id，其他的用class。

*   编写性能优化的选择器。尽可能避免使用开销大的CSS选择器。例如，避免 * 通配符选择器，也不要叠加限定条件到 ID 选择器（例如 div#myid）或 class 选择器（例如 table.results）上。这对于速度至上并包含了成千上万个DOM元素的web应用来说尤为重要。更多相关内容请参阅 MDN 上的这篇
*   尽量使用简写形式的十六进制值，例如，用 _#fff_ 代替 _#ffffff_。
*   对于属性值或颜色参数，省略小于 1 的小数前面的 0 （例如，.5 代替 0.5；-.5px 代替 -0.5px）。
*   选择器要尽可能短，并且尽量限制组成选择器的元素个数，建议不要超过 3 。

### CSS盒子模型

> 深入学习和理解CSS及基于浏览器的盒子模型，对于掌握CSS布局的基础是非常必要的。

*   理解BFC模式（Block Formatting Context）“块级格式化范围”

### 一些约束

*   在多个开发者协作环境下，避免用单行CSS格式，因为这样会给版本控制带来问题。
*   使用 !important 会覆盖掉所有的明确度，不管它有多高。因此我们倾向于避免使用它。大部分时候是没必要用它的。即使你需要覆盖某个你访问不到的样式表里的选择器，往往也会有其他的办法去覆盖。尽可能避免使用它。

### 图片

一般情况下，所有的图片都应该切成带透明背景（PNG8）因为它比GIF有更高的可压缩度，并裁减成紧密贴合图片外边框，任何颜色数很高的图片用jpg压缩到80%左右，而透明背景在省城png24后需要再次使用[软件](https://tinypng.com/)压缩一下。

### JavaScript

我们开发新应用主要会用到 jQuery，不过我们对原生 JavaScript 和所有现代 javascript 库也具有专业经验。

### 编码总体原则

*   99%的代码必须封装在外部Javascript文件中。这些文件必须在 BODY 标签的尾部引入，让页面的性能最大化。
*   所有布尔变量的命名必须用 "is" 开头

        isValid = (test.value >= 4 && test.success);

*   给变量和函数的命名要有逻辑意义：例如： popUpWindowForAd 就比 myWindow 好多了。
*   给代码添加注释！这会有利于减少在调试Javascript函数上花费的时间。
*   最小化全局变量 - 你创建的全局变量越少越好。一般来说，用于你的应用命名空间，1会是个好的数字。

## 一些工具

*   在压缩上我们采用了基于NodeJs开发的gulp，所以好多约定也就省去了
*   css框架采用最新版本的Bootstrap的LESS版本来开发
*   编辑器推荐使用SublimeText3
*   浏览器首选chrome来开发
